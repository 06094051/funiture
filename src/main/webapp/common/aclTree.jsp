<%@ page contentType="text/html;charset=UTF-8" language="java" %><script id="aclTreeTemplate" type="x-tmpl-mustache"><ol class="dd-list ">    {{#aclModuleList}}        <li class="aclModule-name" id="aclModuleTree_{{id}}" href="javascript:void(0)" data-id="{{id}}">            <input type="checkbox" class="aclModuleIds {{#showCheckbox}}{{/showCheckbox}}">&nbsp;<b>{{name}}</b>            <ol>                {{#aclList}}                    <span>                    <input type="checkbox" class="aclIds {{#showCheckbox}}{{/showCheckbox}}" name="aclIds" value="{{id}}" />                    {{name}}&nbsp;                    </span> &nbsp;&nbsp;                {{/aclList}}            </ol>        </li>    {{/aclModuleList}}</ol></script><script type="text/javascript">    var aclTreeTemplate = $('#aclTreeTemplate').html();    Mustache.parse(aclTreeTemplate);    function renderAclTree(result, idElement, showCheckbox) {        var rendered = Mustache.render(aclTreeTemplate, {            aclModuleList: result.data,            "showCheckbox": function () { // 对展示做特殊处理                return function (text, render) {                    return showCheckbox ? "" : "hidden";                }            }        });        $('#' + idElement).html(rendered);        recursiveRenderAclModule(result.data, showCheckbox);    }    // 递归渲染权限模块列表    function recursiveRenderAclModule(aclModuleList, showCheckbox) {        if (aclModuleList && aclModuleList.length > 0) {            $(aclModuleList).each(function (i, aclModule) {                if (aclModule.aclModuleList && aclModule.aclModuleList.length > 0) {                    var rendered = Mustache.render(aclTreeTemplate, {                        aclModuleList: aclModule.aclModuleList                    });                    $('#aclModuleTree_' + aclModule.id).append(rendered);                    recursiveRenderAclModule(aclModule.aclModuleList, showCheckbox);                }            });        }    }</script>